\documentclass[10pt, compress]{beamer}

\usetheme{m}

\usepackage{booktabs}
\usepackage{xcolor}
\usepackage[scale=2]{ccicons}
\usepackage{listings}



\usepgfplotslibrary{dateplot}

%Colors
\definecolor{light_gray}{HTML}{aaaaaa}

%Commands
\newcommand{\up}[1]{\textsuperscript{\textbf{\textsc{#1}}}}
%\setbeameroption{show notes}
\lstset{language=Java,
                columns=flexible,
  basicstyle={\tiny\ttfamily},
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{orange},
  commentstyle=\color{light_gray},
  stringstyle=\color{orange},
  tabsize=2,
  aboveskip=0pt,
  belowskip=0pt,
}





\title{Conception et développement d’une application d’annotation thématique}
\subtitle{dans l’environnement Gate}
\date{\today}
\author{Charles Follet \and Roland Bary}
\institute{Université de Pau et Pays de l'Adour}

\begin{document}

\maketitle
\begin{frame}[fragile]
  \frametitle{Introduction}
\end{frame}
\begin{frame}[fragile]
  \frametitle{Sommaire}
  \tableofcontents
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%   Structure du numeraire %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Structure du numéraire}
\begin{frame}[fragile]
\frametitle{Exemple}
\begin{scriptsize}
Agen (Lot-et-Garonne)\\~\\

Type de 793/4-812: Charlemagne (768-814)\\
Denier de Charlemagne (24 exemplaires étudiés)\\
+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme\\
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1; Collections: Berlin 1,64, 1,45;\\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50) Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\
(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35);\\
Trouvailles: Bolsward, 1 ex. (H. 528) (1,26).
\end{scriptsize}
\note{Numeraire organisé en atelier, un atelier fabrique une ou plusieurs monnaie}
\end{frame}


\begin{frame}[fragile]
  \frametitle{L'atelier}
  \begin{scriptsize}
\textbf{Agen (Lot-et-Garonne)}\\~\\
\textcolor{light_gray}{
Type de 793/4-812: Charlemagne (768-814)\\
Denier de Charlemagne (24 exemplaires étudiés)\\
+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme\\
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1; Collections: Berlin 1,64, 1,45; \\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50) Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\
(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35); \\Trouvailles: Bolsward, 1 ex. (H. 528) (1,26).
} 
    \end{scriptsize}
    
    \note{Forme : Ville (Dpt|Pays)?}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Le type}
  \begin{scriptsize}
\textcolor{light_gray}{Agen (Lot-et-Garonne)}\\~\\

\textbf{Type de 793/4-812: Charlemagne (768-814)}\\
\textcolor{light_gray}{
Denier de Charlemagne (24 exemplaires étudiés)\\
+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme\\
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1; Collections: Berlin 1,64, 1,45; \\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50) Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\
(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35); \\Trouvailles: Bolsward, 1 ex. (H. 528) (1,26).
} 
    \end{scriptsize}
    
    \note{Forme : Perdiode(souverains)+}
\end{frame}

\begin{frame}[fragile]
  \frametitle{La nature}
  \begin{scriptsize}
\textcolor{light_gray}{Agen (Lot-et-Garonne)}\\~\\

\textcolor{light_gray}{Type de 793/4-812: Charlemagne (768-814)}\\

\textbf{Denier de Charlemagne (24 exemplaires étudiés)}\\
\textcolor{light_gray}{
+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme\\
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1; Collections: Berlin 1,64, 1,45; \\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50) Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\
(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35); \\Trouvailles: Bolsward, 1 ex. (H. 528) (1,26).
} 
    \end{scriptsize}
        \note{Forme : Denier, Obole, ...}
\end{frame}

\begin{frame}[fragile]
  \frametitle{La légende}
  \begin{scriptsize}
\textcolor{light_gray}{Agen (Lot-et-Garonne)}\\~\\

\textcolor{light_gray}{Type de 793/4-812: Charlemagne (768-814)\\
Denier de Charlemagne (24 exemplaires étudiés)}\\

\textbf{+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme}\\
\textcolor{light_gray}{
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1; Collections: Berlin 1,64, 1,45; \\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50) Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\
(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35); \\
Trouvailles: Bolsward, 1 ex. (H. 528) (1,26).
} 
    \end{scriptsize}
        \note{Forme :+?LEG droit SPACE  +?LEG revers}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Les collections}
  \begin{scriptsize}
\textcolor{light_gray}{Agen (Lot-et-Garonne)}\\~\\

\textcolor{light_gray}{
Type de 793/4-812: Charlemagne (768-814)\\
Denier de Charlemagne (24 exemplaires étudiés)\\
+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme
}\\
\textcolor{light_gray}{
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1; }\textbf{Collections: Berlin 1,64, 1,45; \\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50) }\textcolor{light_gray}{Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35); \\Trouvailles: Bolsward, 1 ex. (H. 528) (1,26).
} 
    \end{scriptsize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Les trésors}
  \begin{scriptsize}
\textcolor{light_gray}{Agen (Lot-et-Garonne)}\\~\\

\textcolor{light_gray}{
Type de 793/4-812: Charlemagne (768-814)\\
Denier de Charlemagne (24 exemplaires étudiés)\\
+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme
}\\
\textcolor{light_gray}{
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1;
Collections: Berlin 1,64, 1,45; \\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50) }\textbf{Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\
(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35); }\\
\textcolor{light_gray}{
Trouvailles: Bolsward, 1 ex. (H. 528) (1,26).
} 
    \end{scriptsize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Les trouvailles}
  \begin{scriptsize}
\textcolor{light_gray}{Agen (Lot-et-Garonne)}\\~\\

\textcolor{light_gray}{
Type de 793/4-812: Charlemagne (768-814)\\
Denier de Charlemagne (24 exemplaires étudiés)\\
+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme
}\\
\textcolor{light_gray}{
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1;
Collections: Berlin 1,64, 1,45; \\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50) Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\
(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35); }\\
\textbf{Trouvailles: Bolsward, 1 ex. (H. 528) (1,26).}
    \end{scriptsize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Résumé}
  \begin{scriptsize}
Agen (Lot-et-Garonne)\alert{\up{Atelier}}\\~\\
Type de 793/4-812: Charlemagne (768-814)\alert{\up{Type}}\\
Denier de Charlemagne (24 exemplaires étudiés)\alert{\up{Nature}}\\
+ CARLVS REX FR croix~~~~~~~ + AGINNO monogramme\alert{\up{Légende}}\\
Gariel XXII 26; Morrison-Grunthal 177-179; Depeyrot (1) (2) 1;
Collections: Berlin 1,64, 1,45; \\
Bruxelles 1,25, 1,25; Charleville-Mézières 1,56; Copenhague 1,31; Garett 1,73; Grenoble; MEC 735 \\
(1,57), 736 (1,24); Monnaie de Paris 88 (1,55); New York 1,64, 1,57; Prou 792 (1,36), 793 (1,60), \\
794 (1,50)\alert{\up{Collections}} Trésors: Biebrich (790-814), 2 ex. (MG 11, Vôlkers, p. 182) (1,60); Ibersheim (814), 1 ex. \\
(MG 13, Vôlkers, p. 186) (1,64); Dorestad (822), 4 ex. (MG 18, Vôlkers, p. 139; H. 7) (1,35);\alert{\up{Trésors}} \\
Trouvailles: Bolsward, 1 ex. (H. 528) (1,26)\alert{\up{Trouvailles}}.
    \end{scriptsize}
\end{frame}

\section{Annotations}
\begin{frame}[fragile,t]
\setbeamercovered{transparent}
  \frametitle{Choix d'annotation}
 \begin{columns}[t]
 \onslide<1>
  \begin{column}{.5\linewidth}
    {\large \textsc{\alert{Gazetier}}}\\
    \textbf{liste} de valeurs.\\~\\
\begin{scriptsize}
    \begin{itemize}
    \item Type de 754/5-768
    \item Type de 768-771
    \item Type de 771-793/4
    \item Type de 793/4-812
    \item Type de 812-814
    \item ...
    \end{itemize}
\end{scriptsize}
  \end{column}
  \onslide<2>
  \begin{column}{.5\linewidth}
    {\large \textsc{\alert{Règle JAPE}}}\\
    \textbf{règle} basée sur une expression régulière.\\
    \begin{lstlisting}
Macro: CHAINE_DEBUT
(
    ({Token.string =="Type"})({SpaceToken})
    ({Token.string =="de"})({SpaceToken})
)

// Exemple : Type de 758/9-762
Rule: PeriodeEmissionRule
(
    CHAINE_DEBUT ({Periode}):p
):PeriodeEmission
-->:PeriodeEmission.PeriodeEmission = {
 	Kind = "PeriodeEmission" ,
 	D1 = :p.Periode.D1, D2 = :p.Periode.D2
}
\end{lstlisting}
\end{column}
 \end{columns}  
\end{frame}

\section{Construction d'une règle JAPE}
\begin{frame}[fragile]
  \frametitle{Approche par raffinement}
\begin{enumerate}[<+->]
    \item{Langage naturel \onslide<4,5,6>{\hfill \textbf{français}}}
    \item{Langage régulier \onslide<5,6>{\hfill\textbf{expressions régulières}}}
    \item{Langage de programmation \onslide<6>{\hfill\textbf{\textit{JAPE}}}}
\end{enumerate}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Approche par raffinement}
Annotation : La période d'émission \\
Exemple : \textit{Type de 793/4-812}
\end{frame}

\begin{frame}[fragile,t]
\setbeamercovered{transparent}
  \frametitle{Approche par raffinement}
\begin{center}
\onslide<2>{Type de} \onslide<1->{793/4-812}
\end{center}
1. \textbf{\textsc{Langage naturel}}\\
\onslide<1->{Une période est un intervalle entre deux dates. Dans notre travail, les dates sont constituées de trois et seulement trois chiffres. En cas d'ambiguïté, chacune d'entre elles peut être suivie d'un / et d'un chiffre traduisant l'indétermination de la date.}\\
\onslide<2>{Il faut assurer la capture de la période d'émission en ajoutant la contrainte précédée de "Type de" afin de ne pas récupérer toutes les périodes du document.}
\end{frame}

\begin{frame}[fragile,t]
\setbeamercovered{transparent}
  \frametitle{Approche par raffinement}
\begin{center}
\onslide<4->{Type de} \onslide<1->{793/4}\onslide<2->{-}\onslide<3->{812}
\end{center}
2. \textbf{\textsc{Langage régulier}}\\
\onslide<4->{Type de : }\onslide<1->{([0-9]\{3\}(/[0-9])?)}\onslide<2->{-}\onslide<3->{([0-9]\{3\}(/[0-9])?)}
\end{frame}

\begin{frame}[fragile,t]
\setbeamercovered{transparent}
  \frametitle{Approche par raffinement}
\begin{center}
\onslide<1->{Type de} \onslide<2->{793/4}\onslide<2->{-}\onslide<2->{812}
\end{center}
3. \textbf{\textsc{Langage de programmation}}\\
\begin{columns}[t]
  \begin{column}{.5\linewidth}
\onslide<1->
\begin{lstlisting}
Macro: CHAINE_DEBUT
(
    ({Token.string =="Type"})({SpaceToken})
    ({Token.string =="de"})({SpaceToken})
)
\end{lstlisting}
\onslide<2->
\begin{lstlisting}
Macro: TROIS_NOMBRES
({Token.kind==number,Token.length == 3})
Macro: UN_NOMBRE
({Token.kind==number,Token.length == 1})
Macro:SLASH
({Token.string=="/"})
Macro:DATE_PRECISE
(TROIS_NOMBRES)
Macro:DATE_IMPRECISE
(TROIS_NOMBRES SLASH UN_NOMBRE)
Macro:DATE
(DATE_PRECISE | DATE_IMPRECISE)
\end{lstlisting}
\end{column}


\begin{column}{.5\linewidth}
\onslide<3->
\begin{lstlisting}
Rule: PeriodeRule
((DATE):d1({Token.string =="-"})(DATE):d2)
:Periode -->:Periode{/*...*/}
\end{lstlisting}
\onslide<4->
\begin{lstlisting}
Rule: PeriodeEmissionRule
(CHAINE_DEBUT ({Periode}):p)
:PeriodeEmission
-->:PeriodeEmission.PeriodeEmission = {/*..*/}
\end{lstlisting}
\end{column}
\end{columns}
\end{frame}

\end{document}